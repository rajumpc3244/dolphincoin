<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="./assets/3.4.5"></script>
    <script src='//whephiwums.com/sdk.js' data-zone='9237110' data-sdk='show_9237110'></script>
    
    <link rel="stylesheet" href="./assets/css/coin.css">
    <link rel="stylesheet" href="./assets/css/style-2.css">
    <link rel="stylesheet" href="./assets/css/responsive-1.css">

    <style>
        /* Responsive Base Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: Arial, sans-serif;
            overflow-x: hidden;
            background: linear-gradient(to right, #C7913D, #F1D06E);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .main-container {
            width: 100%;
            max-width: 500px;
            background: linear-gradient(to right, #C7913D, #F1D06E);
            border-radius: 24px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(15, 23, 42, 0.1);
            border-radius: 24px;
            padding: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }
        
        .double-coins-btn {
            background: rgba(15, 23, 42, 0.1);
            border: none;
            padding: 8px 15px;
            border-radius: 24px;
            color: white;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .double-coins-btn:hover {
            background: rgba(15, 23, 42, 0.2);
        }
        
        .free-coins-banner {
            background: rgba(15, 23, 42, 0.1);
            border-radius: 24px;
            padding: 12px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .balance-display {
            text-align: center;
            margin: 30px 0;
        }
        
        .coin-image {
            width: 50px;
            height: 50px;
            vertical-align: middle;
            margin-bottom: 5px;
        }
        
        .score {
            font-size: clamp(24px, 6vw, 36px);
            font-weight: bold;
            color: white;
        }
        
        .clickable-coin {
            width: 80%;
            max-width: 300px;
            margin: 0 auto;
            display: block;
            cursor: pointer;
            transition: transform 0.1s;
        }
        
        .energy-bar-container {
            background: rgba(15, 23, 42, 0.9);
            border-radius: 24px;
            padding: 12px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .energy-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .energy-icon {
            width: 24px;
            height: 24px;
            margin-right: 8px;
        }
        
        .progress-container {
            background: #3b4758;
            border-radius: 12px;
            height: 8px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #C7913D, #F1D06E);
            border-radius: 12px;
            transition: width 0.3s ease;
        }
        
        .bottom-nav {
            display: flex;
            justify-content: space-around;
            background: rgba(15, 23, 42, 0.9);
            border-radius: 24px;
            padding: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            text-decoration: none;
            font-size: 12px;
        }
        
        .nav-icon {
            width: 30px;
            height: 30px;
            margin-bottom: 5px;
        }
        
        /* Animations */
        .score-display {
            font-size: 24px;
            position: absolute;
            color: yellow;
            animation: fadeOut 1s forwards;
            pointer-events: none;
            z-index: 10;
        }
        
        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: translateY(-30px);
            }
        }
        
        .shake {
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            25% {
                transform: translateX(-5px);
            }
            50% {
                transform: translateX(5px);
            }
            75% {
                transform: translateX(-5px);
            }
        }
        
        #snackbar {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 24px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            font-size: 17px;
        }
        
        #snackbar.show {
            visibility: visible;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }
        
        @keyframes fadein {
            from {bottom: 0; opacity: 0;}
            to {bottom: 30px; opacity: 1;}
        }
        
        @keyframes fadeout {
            from {bottom: 30px; opacity: 1;}
            to {bottom: 0; opacity: 0;}
        }
        
        /* Responsive Adjustments */
        @media (max-width: 400px) {
            .main-container {
                padding: 15px;
                border-radius: 20px;
            }
            
            .header-bar, .free-coins-banner, .energy-bar-container, .bottom-nav {
                padding: 10px;
                border-radius: 20px;
            }
            
            .nav-icon {
                width: 25px;
                height: 25px;
            }
            
            .coin-image {
                width: 40px;
                height: 40px;
            }
            
            .score {
                font-size: clamp(20px, 8vw, 30px);
            }
        }
    </style>
</head>

<body>
    <div class="main-container">
        <div class="header-bar">
            <div class="user-info">
                <img src="./assets/images/logoo.jpg" alt="User Avatar" class="user-avatar">
                <span id="userName">Bota</span>
            </div>
            <button onclick="myFunction()" class="double-coins-btn">
                <span>2X Coins</span>
            </button>
        </div>

        <div id="snackbar">
            Coming Soon !!
        </div>
        
        <div class="free-coins-banner">
            <a href="https://choadsoa.top/4/9229671" style="text-decoration: none; color: white;">
                <span>Get Free 1000$</span>
            </a>
        </div>

        <div class="balance-display">
            <img src="./assets/images/pc.png" alt="Coin" class="coin-image">
            <span id="score" class="score">$ 0</span>
        </div>

        <div id="coin" style="text-align: center;">
            <img src="./assets/images/pcoin.png" alt="Character" class="clickable-coin" onclick="handleClick()">
        </div>

        <div class="energy-bar-container">
            <div class="energy-info">
                <div style="display: flex; align-items: center;">
                    <img src="./assets/images/charge.png" id="charge" alt="Energy" class="energy-icon">
                    <div>
                        <span id="inventory">500</span>
                        <span> / 500</span>
                    </div>
                </div>
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="inventory-fill" style="width: 100%;"></div>
            </div>
        </div>

        <div class="bottom-nav">
            <a href="#" class="nav-btn">
                <img src="./assets/images/m.png" alt="Mine" class="nav-icon">
                <span>Mine</span>
            </a>
            <a href="nft.html" class="nav-btn">
                <img src="./assets/images/pcoin.png" alt="Boost" class="nav-icon">
                <span>NFT</span>
            </a>
            <a href="friend.html" class="nav-btn">
                <img src="./assets/images/f.png" alt="Friends" class="nav-icon">
                <span>Friends</span>
            </a>
            <a href="task.html" class="nav-btn">
                <img src="./assets/images/t.png" alt="Task" class="nav-icon">
                <span>Task</span>
            </a>
            <a href="wallet.html" class="nav-btn">
                <img src="./assets/images/w.png" alt="Wallet" class="nav-icon">
                <span>Wallet</span>
            </a>
        </div>
    </div>

    <div id="sticker" style="display: none; position: absolute;">
        <img src="./assets/images/kolang.png" alt="Sticker" style="width: 250px; height: 100px;">
    </div>

    <script>
        // Initialize variables
        let inventory = 500;
        const maxInventory = 500;
        const rechargeTime = 3600000; // 1 hour

        // Start vibration if supported by the device
        function startVibration() {
            if ("vibrate" in navigator) {
                window.navigator.vibrate(20);
            } else {
                console.log("Vibration not supported on this device");
            }
        }

        // Handle click event on the image
        function handleClick() {
            if (inventory > 2) {
                let coins = Number(localStorage.getItem('coins')) || 0;
                coins += 2;
                localStorage.setItem('coins', coins);

                inventory -= 2;

                document.getElementById('score').textContent = `$ ${coins.toLocaleString()}`;
                updateInventory();
                startVibration();

                const image = document.querySelector('.clickable-coin');
                image.classList.add('shake');
                setTimeout(() => {
                    image.classList.remove('shake');
                }, 500);

                const scoreDisplay = document.createElement('div');
                scoreDisplay.textContent = "+2";
                scoreDisplay.classList.add('score-display');
                document.body.appendChild(scoreDisplay);

                const rect = image.getBoundingClientRect();
                scoreDisplay.style.left = `${rect.left + rect.width / 2 - 15}px`;
                scoreDisplay.style.top = `${rect.top - 20}px`;

                setTimeout(() => {
                    scoreDisplay.remove();
                }, 1000);

                if (inventory === 0) {
                    setTimeout(() => {
                        inventory = maxInventory;
                        updateInventory();
                    }, rechargeTime);
                }
            }
        }

        // Update the inventory display
        function updateInventory() {
            document.getElementById('inventory').textContent = inventory;
            document.getElementById('inventory-fill').style.width = `${(inventory / maxInventory) * 100}%`;

            // Simulate server update (replace with actual fetch in production)
            console.log(`Updating server: inventory=${inventory}`);
        }

        // Snackbar notification
        function myFunction() {
            var x = document.getElementById("snackbar");
            x.className = "show";
            setTimeout(function() {
                x.className = x.className.replace("show", "");
            }, 3000);
        }

        // Load user data when the page loads
        window.onload = () => {
            const profilePic = localStorage.getItem('profilePic');
            const userName = localStorage.getItem('userName');
            let coins = localStorage.getItem('coins') || 0;

            if (profilePic) {
                document.querySelector(".user-avatar").src = profilePic;
            }

            if (userName) {
                document.getElementById('userName').textContent = userName;
            }

            document.getElementById('score').textContent = `$ ${Number(coins).toLocaleString()}`;
            updateInventory();
        };

        // Initialize power system
        let total = localStorage.getItem('total');
        let power = localStorage.getItem('power');
        let count = localStorage.getItem('count');

        if (total == null) {
            localStorage.setItem('total', '500');
        }

        if (power == null) {
            localStorage.setItem('power', '500');
            document.getElementById('inventory').textContent = '500';
        }

        if (count == null) {
            localStorage.setItem('count', '1');
        }

        // Power regeneration
        setInterval(() => {
            power = localStorage.getItem('power');
            if (Number(total) > power) {
                const newPower = Number(power) + Number(count || 1);
                localStorage.setItem('power', `${newPower}`);
                document.getElementById('inventory').textContent = `${newPower}`;
                document.getElementById('inventory-fill').style.width = `${(newPower / total) * 100}%`;
            }
        }, 1000);
    </script>
</body>
</html>
