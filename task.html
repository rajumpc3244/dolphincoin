<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dolphin Coin</title>
  <script>
    // Reset all user points once per session (optional logic)
    window.addEventListener('DOMContentLoaded', () => {
      localStorage.setItem('mainBalance', 0);
      localStorage.setItem('dailyTaskCount', 0);
      localStorage.setItem('completedTasks', JSON.stringify({}));
    });
  </script>
  <style>
    /* ...existing CSS styles */
  </style>
</head>
<body>
  <!-- ...existing HTML layout -->

  <script>
    const completedTasks = {};
    let currentTaskId = null;
    const MAX_DAILY_TASKS = 50;
    const MIN_AD_WATCH_TIME = 15 * 1000; // 15 seconds

    function initDailyTasks() {
      // ...existing init code...
    }

    function updateDailyProgress() {
      // ...existing update code...
    }

    function startTask(taskId) {
      const dailyCount = parseInt(localStorage.getItem('dailyTaskCount')) || 0;
      if (dailyCount >= MAX_DAILY_TASKS) {
        showAlert("You've completed all daily tasks! Come back tomorrow for more.");
        return;
      }
      if (completedTasks[taskId]) return;
      currentTaskId = taskId;
      document.getElementById('adContainer').classList.remove('hidden');
      document.getElementById('adDisplay').innerHTML = '<p>Loading ad...</p>';

      const adStartTime = Date.now();

      show_9237110().then(() => {
        const elapsedTime = Date.now() - adStartTime;
        if (elapsedTime >= MIN_AD_WATCH_TIME) {
          document.getElementById('continueBtn').classList.remove('hidden');
          document.getElementById('adDisplay').innerHTML = '<p>Ad completed! Click continue to complete your task.</p>';
        } else {
          document.getElementById('adDisplay').innerHTML = '<p>Please watch the ad for at least 15 seconds.</p>';
          setTimeout(() => {
            document.getElementById('adContainer').classList.add('hidden');
          }, 2000);
        }
      }).catch(() => {
        document.getElementById('adDisplay').innerHTML = '<p>Ad not completed. Please try again.</p>';
        setTimeout(() => {
          document.getElementById('adContainer').classList.add('hidden');
        }, 2000);
      });

      document.getElementById('continueBtn').onclick = function () {
        completeTask(currentTaskId);
      };
    }

    function completeTask(taskId) {
      completedTasks[taskId] = true;
      const taskElement = document.getElementById(taskId);
      taskElement.classList.add('completed');
      taskElement.querySelector('.status-icon').textContent = 'âœ“';

      let dailyCount = parseInt(localStorage.getItem('dailyTaskCount')) || 0;
      dailyCount++;
      localStorage.setItem('dailyTaskCount', dailyCount);

      document.getElementById('adContainer').classList.add('hidden');
      document.getElementById('continueBtn').classList.add('hidden');

      let reward = 0;
      switch (taskId) {
        case 'task1': reward = 500; break;
        case 'task2': reward = 500; break;
        case 'task3': reward = 300; break;
        case 'task4': reward = 300; break;
        case 'task5': reward = 200; break;
      }

      const currentBalance = parseInt(localStorage.getItem('mainBalance')) || 0;
      const newBalance = currentBalance + reward;
      document.getElementById('score').textContent = newBalance;
      localStorage.setItem('mainBalance', newBalance);

      updateDailyProgress();
      showAlert(`Task completed! You earned ${reward} coins! (${dailyCount}/${MAX_DAILY_TASKS} today)`);
      currentTaskId = null;
    }

    function showAlert(message) {
      const alertBox = document.createElement('div');
      alertBox.style.position = 'fixed';
      alertBox.style.top = '50%';
      alertBox.style.left = '50%';
      alertBox.style.transform = 'translate(-50%, -50%)';
      alertBox.style.backgroundColor = '#1e293b';
      alertBox.style.color = 'white';
      alertBox.style.padding = '20px';
      alertBox.style.borderRadius = '10px';
      alertBox.style.zIndex = '1000';
      alertBox.style.boxShadow = '0 0 20px rgba(0,0,0,0.5)';
      alertBox.style.textAlign = 'center';
      alertBox.innerHTML = `
        <p>${message}</p>
        <button onclick="this.parentNode.remove()" style="margin-top: 15px; padding: 8px 15px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">OK</button>
      `;
      document.body.appendChild(alertBox);
    }

    document.addEventListener('DOMContentLoaded', function () {
      initDailyTasks();
    });
  </script>
</body>
</html>
